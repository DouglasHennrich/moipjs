/*! Moip.js - build date: 2013-04-22 */
var moip={creditCard:{isValid:function(a){a=a.replace(/\s+/g,""),a=a.replace(/\./g,""),a=a.replace(/\-/g,"");for(var t=0,e=2-a.length%2;a.length>=e;e+=2)t+=parseInt(a.charAt(e-1));for(var e=a.length%2+1;a.length>e;e+=2){var n=2*parseInt(a.charAt(e-1));t+=10>n?n:n-9}return 0==t%10?!0:!1},cardType:function(a){a=a.replace(/\s+/g,""),a=a.replace(".",""),a=a.replace("-","");var t=/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/,e=/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/,n=/^3[4,7]\d{13}$/,r=/^3[0,6,8]\d{12}$/,i=/^(606282\d{10}(\d{3})?|3841\d{15})$/;return a.match(t)?{brand:"VISA"}:a.match(e)?{brand:"MASTERCARD"}:a.match(n)?{brand:"AMEX"}:a.match(r)?{brand:"DINERS"}:a.match(i)?{brand:"HIPERCARD"}:null},isSecurityCodeValid:function(a,t){var e=moip.creditCard.cardType(a);if("4"==e.brand)var n=4;else var n=3;var r=RegExp("[0-9]{"+n+"}");return t.length==n&&r.test(t)},isExpiryDateValid:function(a,t){var e=new Date,n=e.getMonth()+1,r=e.getYear()+1900,i=!1;return parseInt(t)>=r&&parseInt(a)>=n&&(i=!0),i}},calculator:{pricing:function(a){return this.buildJson(a)},buildJson:function(a){var t,e,n=[],r=[],l=[];for(t=this._calculateTransactionTax(a.amount,a.transaction_percentage,a.fixed),e=this._calculateInstallmentValue(a.amount,a.installment),i=0;11>=i;i++)n[i]=this._calculateAntecipationPercentage(t,a,i),r[i]=this._calculateTotalTax(n[i],t),l[i]=this._calculateLiquidValue(a.amount,r[i]);var c={amount:a.amount/100,transaction_tax:t,antecipation_percentage:n,total_tax:r,liquid_value:l,installment:e};return c},_calculateTransactionTax:function(a,t,e){return(a*(t/100)+e)/100},_calculateAntecipationPercentage:function(a,t,e){return parseFloat((parseFloat(t.antecipation_percentage/100/30*(30+15*e-t.floating))*parseFloat(t.amount/100-a)).toFixed(2))},_calculateTotalTax:function(a,t){return parseFloat((a+t).toFixed(2))},_calculateLiquidValue:function(a,t){return parseFloat(a)/100+parseFloat(t)},_calculateInstallmentValue:function(a,t){return parseFloat((a/t/100).toFixed(2))}}};