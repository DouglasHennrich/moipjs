/*! Moip.js - build date: 2013-04-19 */
var moip={creditCard:{isValid:function(e){e=e.replace(/\s+/g,""),e=e.replace(/\./g,""),e=e.replace(/\-/g,"");for(var a=0,t=2-e.length%2;e.length>=t;t+=2)a+=parseInt(e.charAt(t-1));for(var t=e.length%2+1;e.length>t;t+=2){var r=2*parseInt(e.charAt(t-1));a+=10>r?r:r-9}return 0==a%10?!0:!1},cardType:function(e){e=e.replace(/\s+/g,""),e=e.replace(".",""),e=e.replace("-","");var a=/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/,t=/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/,r=/^3[4,7]\d{13}$/,n=/^3[0,6,8]\d{12}$/,i=/^(606282\d{10}(\d{3})?|3841\d{15})$/;return e.match(a)?{brand:"VISA"}:e.match(t)?{brand:"MASTERCARD"}:e.match(r)?{brand:"AMEX"}:e.match(n)?{brand:"DINERS"}:e.match(i)?{brand:"HIPERCARD"}:null},isSecurityCodeValid:function(e,a){var t=moip.creditCard.cardType(e);if("4"==t.brand)var r=4;else var r=3;var n=RegExp("[0-9]{"+r+"}");return a.length==r&&n.test(a)},isExpiryDateValid:function(e,a){var t=new Date,r=t.getMonth()+1,n=t.getYear()+1900,i=!1;return parseInt(a)>=n&&parseInt(e)>=r&&(i=!0),i}},calculator:{getPricing:function(e){var a=(e.amount*(e.transaction_percentage/100)+e.fixed)/100,t=this.getAntecipationPercentage(a,e);this.getTotalTax(t,a),console.log(t)},getAntecipationPercentage:function(e,a){var t=[];for(i=1;12>i;i++)t[i-1]=a.antecipation_percentage/100/30*(30+15*(i-1)-a.floating)*(a.amount/100-e);return t},getTotalTax:function(e,a){var t=[];for(i=0;e.length>i;i++)t[i]=e[i]+a;return t}}};