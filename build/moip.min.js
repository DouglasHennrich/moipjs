/*! Moip.js - build date: 2013-04-21 */
var moip={creditCard:{isValid:function(t){t=t.replace(/\s+/g,""),t=t.replace(/\./g,""),t=t.replace(/\-/g,"");for(var a=0,e=2-t.length%2;t.length>=e;e+=2)a+=parseInt(t.charAt(e-1));for(var e=t.length%2+1;t.length>e;e+=2){var r=2*parseInt(t.charAt(e-1));a+=10>r?r:r-9}return 0==a%10?!0:!1},cardType:function(t){t=t.replace(/\s+/g,""),t=t.replace(".",""),t=t.replace("-","");var a=/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/,e=/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/,r=/^3[4,7]\d{13}$/,n=/^3[0,6,8]\d{12}$/,i=/^(606282\d{10}(\d{3})?|3841\d{15})$/;return t.match(a)?{brand:"VISA"}:t.match(e)?{brand:"MASTERCARD"}:t.match(r)?{brand:"AMEX"}:t.match(n)?{brand:"DINERS"}:t.match(i)?{brand:"HIPERCARD"}:null},isSecurityCodeValid:function(t,a){var e=moip.creditCard.cardType(t);if("4"==e.brand)var r=4;else var r=3;var n=RegExp("[0-9]{"+r+"}");return a.length==r&&n.test(a)},isExpiryDateValid:function(t,a){var e=new Date,r=e.getMonth()+1,n=e.getYear()+1900,i=!1;return parseInt(a)>=n&&parseInt(t)>=r&&(i=!0),i}},calculator:{getPricing:function(t){var a=(t.amount*(t.transaction_percentage/100)+t.fixed)/100,e=this.getAntecipationPercentage(a,t),r=this.getTotalTax(e,a),n=this.getLiquidValue(t.amount,r),i={amount:t.amount/100,transaction_tax:a,antecipation_percentage:e,total_tax:r,liquid_value:n};return i},getAntecipationPercentage:function(t,a){var e=[];for(i=1;12>=i;i++)e[i-1]=a.antecipation_percentage/100/30*(30+15*(i-1)-a.floating)*(a.amount/100-t),e[i-1]=parseFloat(e[i-1].toFixed(2));return e},getTotalTax:function(t,a){var e=[];for(i=0;t.length>i;i++)e[i]=parseFloat((t[i]+a).toFixed(2));return e},getLiquidValue:function(t,a){var e=[];for(i=0;a.length>i;i++)e[i]=parseFloat(t)/100+parseFloat(a[i]);return e}}};