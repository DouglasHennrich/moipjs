/*! Moip.js - build date: 2013-04-21 */
var moip={creditCard:{isValid:function(a){a=a.replace(/\s+/g,""),a=a.replace(/\./g,""),a=a.replace(/\-/g,"");for(var t=0,e=2-a.length%2;a.length>=e;e+=2)t+=parseInt(a.charAt(e-1));for(var e=a.length%2+1;a.length>e;e+=2){var r=2*parseInt(a.charAt(e-1));t+=10>r?r:r-9}return 0==t%10?!0:!1},cardType:function(a){a=a.replace(/\s+/g,""),a=a.replace(".",""),a=a.replace("-","");var t=/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/,e=/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/,r=/^3[4,7]\d{13}$/,n=/^3[0,6,8]\d{12}$/,i=/^(606282\d{10}(\d{3})?|3841\d{15})$/;return a.match(t)?{brand:"VISA"}:a.match(e)?{brand:"MASTERCARD"}:a.match(r)?{brand:"AMEX"}:a.match(n)?{brand:"DINERS"}:a.match(i)?{brand:"HIPERCARD"}:null},isSecurityCodeValid:function(a,t){var e=moip.creditCard.cardType(a);if("4"==e.brand)var r=4;else var r=3;var n=RegExp("[0-9]{"+r+"}");return t.length==r&&n.test(t)},isExpiryDateValid:function(a,t){var e=new Date,r=e.getMonth()+1,n=e.getYear()+1900,i=!1;return parseInt(t)>=n&&parseInt(a)>=r&&(i=!0),i}},calculator:{getPricing:function(a){var t=(a.amount*(a.transaction_percentage/100)+a.fixed)/100,e=this.getAntecipationPercentage(t,a),r=this.getTotalTax(e,t),n=this.getLiquidValue(a.amount,r);console.log("Valor da transação: "+a.amount/100),console.log("Taxa da transacao: "+t),console.log("Valores de antecipação: "+e),console.log("Totais de taxas: "+r),console.log("Valor liquido: "+n),{amount:a.amount/100,transaction_tax:t,antecipation_percentage:e,total_tax:r,liquid_value:n}},getAntecipationPercentage:function(a,t){var e=[];for(i=1;12>i;i++)e[i-1]=t.antecipation_percentage/100/30*(30+15*(i-1)-t.floating)*(t.amount/100-a),e[i-1]=parseFloat(e[i-1].toFixed(2));return e},getTotalTax:function(a,t){var e=[];for(i=0;a.length>i;i++)e[i]=(a[i]+t).toFixed(2);return e},getLiquidValue:function(a,t){var e=[];for(i=0;t.length>i;i++)e[i]=parseFloat(a)/100+parseFloat(t[i]);return e}}};